<%= simple_form_for @relationship, :html => { :class => 'form-horizontal' } do |f| %>
  <% if @relationship.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@relationship.errors.count, "error") %> prohibited this person from being saved:</h2>

      <ul>
      <% @relationship.errors.full_messages.each do |msg| %>
        <br>
        <li>- <%= msg %></li>
        <br>
      <% end %>
      </ul>
    </div>
  <% end %>
  <% if ! @person1_id.blank? %>
    <%= f.label :person1_index, label: "Person 1"%> 
    <%= Person.find(@person1_id).first_name + " " + Person.find(@person1_id).last_name %>
    <%= f.hidden_field :person1_index, :value => @person1_id %>
  <% else %>
    <%= f.input :person1_index, as: :hidden %>
    <%= f.input :person1_autocomplete, as: :autocomplete, url: autocomplete_person_search_names_all_relationships_path, input_html: { 'data-id-element' => '#relationship_person1_index' }, label: "Person 1", placeholder: "name" %>
  <% end %>
    <%= f.input :person2_index, as: :hidden %>
    <%= f.input :person2_autocomplete, as: :autocomplete, url: autocomplete_person_search_names_all_relationships_path, input_html: { 'data-id-element' => '#relationship_person2_index' }, label: "Person 2", placeholder: "name" %>
  <br>
  <%= f.label :original_certainty, label: "Estimated Certainty" %>
  <%= f.range_field :original_certainty, :min=>0, :max=>100, :class=>"slide", :id=>"slider1"%>
  <br>
    <% if ! @relationship.original_certainty.blank? %>
        <text id="formCertainty">Possible Relationships @ <%= @relationship.original_certainty %>%</text><br>
    <% else %>
      <text id="formCertainty">Possible Relationships @ 50%</text><br>
    <% end %>
  <br>
  <%= f.label :start_date_type, label: "Start Date" %>
  <%= f.input :start_date_type, :collection =>["BF", "AF","IN","CA","BF/IN","AF/IN"], label: false, prompt: "Year Type", hint: " BF = Before, AF = After, IN = In, CA = Circa, BF/IN = Before or In, AF/IN = After or In" %>
  <%= f.input :start_month, label: "Start Date", :collection =>["January","February","March","April","May","June","July","August","September","October","November","December"], label: false, prompt: "Month", :include_blank => true %>
  <%= f.input :start_day, label: false, :collection => 1..31, prompt: "Day", :include_blank => true %>
  <%= f.input :start_year, as: :string, label: false, placeholder: "Year"%>
  <%= f.label :end_date_type, label: "End Date" %>
  <%= f.input :end_date_type, :collection =>["BF", "AF","IN","CA","BF/IN","AF/IN"], label: false, prompt: "Year Type", hint: " BF = Before, AF = After, IN = In, CA = Circa, BF/IN = Before or In, AF/IN = After or In" %>
  <%= f.input :end_month, :collection =>["January","February","March","April","May","June","July","August","September","October","November","December"], label: false, prompt: "Month", :include_blank => true %>
  <%= f.input :end_day, label: false, :collection => 1..31, prompt: "Day", :include_blank => true %>
  <%= f.input :end_year, label: false, as: :string, placeholder: "Year" %>

  <%= f.input :justification, input_html: { rows:"5" }, required: true, label: "Justification for Relationship Creation" %>
  <%= f.hidden_field :created_by, :value => current_user.id %>
  <% if (current_user.user_type == "Admin") || (current_user.user_type == "Curator") %>
    <%= f.input :is_approved %>
    <%= f.input :is_active %>
    <%= f.input :is_rejected %>
    <%= f.hidden_field :approved_by, :value => current_user.id %>
    <%= f.hidden_field :approved_on, :value => Time.now %>
  <% end %>

  <div class="form-actions">
    Please note that your submission will not appear on SDFB <br>
    until it is reviewed by a SDFB curator or administrator. <br>
    <%= f.button :submit, :class => 'btn btn-primary' %>
  </div>
<% end %>