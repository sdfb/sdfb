
<% content_for :title, "SDFB: People" %>

<h1>All People <%= link_to 'Add a Person to SDFB', new_person_path, :class => 'btn btn-primary' %><%=link_to 'Export Data', '/export_people', :class => 'btn btn-primary'%></h1>

<div class="well">
  <div class="container">
    <div class="row">
      <div class="span4"><%= render 'person_search_box' %></div>
    </div>
  </div>
</div>

  <table  class="table table-condensed">
    <thead>
      <tr>
        <th>SDFB Person ID</th>
        <th>ODNB ID</th>
        <th>Prefix</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Suffix</th>
        <th>Title</th>
        <th>Birth Year Type</th>
        <th>Birth Year</th>
        <th>Death Year Type</th>
        <th>Death Year</th>
        <th>Historical Significance</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @people_approved.each do |person| %>
        <tr>
          <td><%= link_to person.id, person %></td>
          <% if ! (person.odnb_id == 0) %>  
            <td><%= person.odnb_id %></td>
          <% else %>
            <td></td>
          <% end %>
          <td><%= person.prefix %></td>
          <td><%= person.first_name %></td>
          <td><%= person.last_name %></td>
          <td><%= person.suffix %></td>
          <td><%= person.title %></td>
          <td>
            <% if person.birth_year_type == "BF" %>
              Before
            <% elsif person.birth_year_type == "AF" %>
              After
            <% elsif person.birth_year_type == "IN" %>
              In
            <% elsif person.birth_year_type == "CA" %>
              Circa
            <% elsif person.birth_year_type == "BF/IN" %>
              Before or In
            <% elsif person.birth_year_type == "AF/IN" %>
              After or In
            <% end %>
          </td>
          <td><%= person.ext_birth_year %></td>
          <td>
            <% if person.death_year_type == "BF" %>
              Before
            <% elsif person.death_year_type == "AF" %>
              After
            <% elsif person.death_year_type == "IN" %>
              In
            <% elsif person.death_year_type == "CA" %>
              Circa
            <% elsif person.death_year_type == "BF/IN" %>
              Before or In
            <% elsif person.death_year_type == "AF/IN" %>
              After or In
            <% end %>
          </td>
          <td><%= person.ext_death_year %></td>
          <td><%= person.historical_significance %></td>
          <td>
            <% if can? :update, person %>      
                <%= link_to t('.edit', :default => t("helpers.links.edit")),
                            edit_person_path(person), :class => 'btn btn-mini' %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @people_approved, :param_name => 'people_approved_page', :previous_label => "Previous&nbsp;", :next_label => "&nbsp;Next" %>